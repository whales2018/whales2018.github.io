<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>沧海一粟</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="沧海一粟">
<meta property="og:url" content="https://whales2018.github.io/index.html">
<meta property="og:site_name" content="沧海一粟">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="沧海一粟">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">沧海一粟</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://whales2018.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-tcpip-1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/09/18/tcpip-1/" class="article-date">
  <time datetime="2018-09-18T03:21:11.000Z" itemprop="datePublished">2018-09-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/《TCP-IP详解卷1》阅读笔记/">《TCP/IP详解卷1》阅读笔记</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/09/18/tcpip-1/">《TCP/IP详解卷1》阅读笔记一</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://whales2018.github.io/2018/09/18/tcpip-1/" data-id="cjsvbgdpe000q45t9dy31iuul" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-opsystem-1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/08/18/opsystem-1/" class="article-date">
  <time datetime="2018-08-18T03:21:11.000Z" itemprop="datePublished">2018-08-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/《现代操作系统》阅读笔记/">《现代操作系统》阅读笔记</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/08/18/opsystem-1/">《现代操作系统》阅读笔记一</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="一-进程与线程"><a href="#一-进程与线程" class="headerlink" title="一. 进程与线程"></a>一. 进程与线程</h1><h2 id="进程创建"><a href="#进程创建" class="headerlink" title="进程创建"></a>进程创建</h2><ol>
<li>系统初始化</li>
<li>正在进行的进程调用进程创建系统调用</li>
<li>用户请求</li>
<li>批处理作业初始化</li>
</ol>
<h2 id="进程终止"><a href="#进程终止" class="headerlink" title="进程终止"></a>进程终止</h2><ol>
<li>正常退出</li>
<li>出错退出，自愿</li>
<li>严重错误，非自愿</li>
<li>被其他进程杀死</li>
</ol>
<h2 id="进程层次结构"><a href="#进程层次结构" class="headerlink" title="进程层次结构"></a>进程层次结构</h2><ol>
<li>系统启动初始化由init特殊进程运行</li>
</ol>
<h2 id="进程状态"><a href="#进程状态" class="headerlink" title="进程状态"></a>进程状态</h2><ol>
<li>运行，就绪，阻塞</li>
<li>进程中断处理，启动，停止由操作系统进程调度程序控制</li>
</ol>
<h2 id="进程的实现"><a href="#进程的实现" class="headerlink" title="进程的实现"></a>进程的实现</h2><ol>
<li>操作系统维护一个进程表，每个进程占用一个进程表项（进程控制块PCB）</li>
<li>PCB：包含了进程状态的重要信息，程序计数器，堆栈指针，内存分配状况，打开的文件，进程由运行状态转换到就绪或阻塞需要保存的信息等</li>
<li>进程切换：保存寄存器值，设置新的堆栈，C中断服务程序运行，调度程序决定下一个进程运行，开始运行新的当前进程</li>
<li>CPU利用率：进程等待IO操作时间与其停留在内存中时间的比对P，内存中同时有N个进程，则利用率=1-P的N次方</li>
</ol>
<h2 id="线程"><a href="#线程" class="headerlink" title="线程"></a>线程</h2><ol>
<li>传统：每个进程有一个地址空间和一个控制线程</li>
<li>对于大量IO操作，多线程允许这些活动重叠进行</li>
<li>所有线程都有完全一样的地址空间</li>
<li>线程共享进程内容：地址空间，全局变量，打开文件，子进程，信号与信号处理程序</li>
<li>线程独有：程序计数器，寄存器，堆栈，状态</li>
<li>线程创建的线程与当前线程平等，线程可以阻塞等待其他线程返回，线程也可以主动让出CPU</li>
</ol>
<h2 id="线程的实现"><a href="#线程的实现" class="headerlink" title="线程的实现"></a>线程的实现</h2><h3 id="用户级线程"><a href="#用户级线程" class="headerlink" title="用户级线程"></a>用户级线程</h3><ol>
<li>线程的调度不需要内核，内核不知道多线程的存在，由用户程序自己控制内核切换，切换快</li>
<li>可以在不支持线程的操作系统实现，允许进程定制调度算法</li>
<li>同一个进程只能同时有一个线程在运行，如果有一个线程阻塞于系统调用，则整个进程阻塞</li>
<li>执行系统调用时将导致所属进程被中断，而内核级线程只导致线程中断</li>
</ol>
<h3 id="内核级线程"><a href="#内核级线程" class="headerlink" title="内核级线程"></a>内核级线程</h3><ol>
<li>多核机器，一个进程的多个线程可以同时处理</li>
<li>线程用户态运行内核态调度切换</li>
</ol>
<h3 id="混合线程模型"><a href="#混合线程模型" class="headerlink" title="混合线程模型"></a>混合线程模型</h3><ol>
<li>用户线程由运行时库调度器管理，内核线程由操作系统调度器管理</li>
<li>一对一，多对一，多对多</li>
</ol>
<h2 id="进程间通信"><a href="#进程间通信" class="headerlink" title="进程间通信"></a>进程间通信</h2><p>IPC问题</p>
<ol>
<li>进程传递信息给另一个</li>
<li>多个进程在关键活动不会出现交叉</li>
<li>正确的顺序</li>
</ol>
<h3 id="通信方法"><a href="#通信方法" class="headerlink" title="通信方法"></a>通信方法</h3><ol>
<li>共享内存</li>
<li>管道</li>
<li>消息队列</li>
<li>socket</li>
<li>远程过程调用RPC</li>
</ol>
<h3 id="临界区"><a href="#临界区" class="headerlink" title="临界区"></a>临界区</h3><ol>
<li>对进程共享资源的程序片段称作临界区</li>
<li>避免竞争条件：任何两个进程不能同时处于临界区，不对CPU作假设，临界区外运行的进程不能阻塞其他进程，不能使进程无限等待进入临界区</li>
</ol>
<h3 id="进程同步"><a href="#进程同步" class="headerlink" title="进程同步"></a>进程同步</h3><ol>
<li>互斥锁+条件变量</li>
<li>信号量pv操作</li>
</ol>
<h2 id="进程调度"><a href="#进程调度" class="headerlink" title="进程调度"></a>进程调度</h2><ol>
<li>衡量调度：吞吐量系统每小时完成的作业数，周转时间批处理到结束的平均统计时间，CPU利用率</li>
</ol>
<h1 id="二、存储管理"><a href="#二、存储管理" class="headerlink" title="二、存储管理"></a>二、存储管理</h1><h2 id="内存"><a href="#内存" class="headerlink" title="内存"></a>内存</h2><ol>
<li>地址空间：一个进程可用于寻址内存的一套地址集合</li>
<li>每个进程的地址空间映射到物理内存的不同部分</li>
<li>程序装载到内存中连续地址。程序的起始物理地址装载到基址寄存器，程序的长度装载到界限寄存器。进程寄存器相关值由内核维护</li>
</ol>
<h2 id="交换"><a href="#交换" class="headerlink" title="交换"></a>交换</h2><ol>
<li>进程完整调入内存运行一段时间，存回磁盘</li>
<li>被唤醒时重新装载到内存，由基址寄存器和界限寄存器重新映射物理内存</li>
</ol>
<h2 id="空闲内存管理"><a href="#空闲内存管理" class="headerlink" title="空闲内存管理"></a>空闲内存管理</h2><ol>
<li>使用位图：每个分配单元对应1位，0表示空闲</li>
<li>使用链表：每个节点代表一块内存，便于交换</li>
</ol>
<h2 id="虚拟内存"><a href="#虚拟内存" class="headerlink" title="虚拟内存"></a>虚拟内存</h2><p>每个程序有自己的地址空间，被分割成多个快，即页面，每一页有连续的地址范围。这些页被映射到物理内存，不一定需要在内存中才能运行，<br>当程序引用到一部分不在物理内存中的地址空间时，操作系统负责将缺失的部分装入物理内存并重新执行失败指令。当程序等待它的一部分读入内存时，可以让出CPU</p>
<h3 id="分页"><a href="#分页" class="headerlink" title="分页"></a>分页</h3><ol>
<li>虚拟地址：没有虚拟内存时，系统直接将虚拟地址送到内存总线。使用虚拟内存，则送到内存管理单元MMU映射为物理地址</li>
<li>页面：虚拟地址空间按照固定大小划分为固定大小的页面</li>
<li>页框：物理内存对应页面的单元</li>
<li>页面找无法映射物理内存时，CPU陷入缺页中断page fault，操作系统选择很少使用的页框，将内容写入磁盘，随后将页面对应的内容读入到内存，修改映射关系，重新执行指令</li>
<li>MMU页表：虚拟地址分成虚拟页号和偏移量，虚拟页号作页表索引，由页表项找到页框号</li>
<li>引入TLB快表加快虚拟地址到物理地址的转换</li>
<li>引入多级页表，解决虚拟地址空间巨大的问题</li>
<li>页面置换算法：最近未使用页面置换算法，先进先出等</li>
<li>页面大小：小页面减少内存占用，但页表太大，磁盘与内存传输是按页进行，进程切换页表装入硬件寄存器也会变慢。大页面则容易产生更大碎片，浪费内存</li>
</ol>
<h3 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h3><ol>
<li>静态链接：将被调用函数的库程序全部装载生成二进制可执行文件，耗空间，每次都需要重新编译</li>
<li>动态链接：加载了一小段能够在运行时绑定被调用函数的存根例程，在第一次被调用时被装载</li>
</ol>
<h3 id="内存映射文件"><a href="#内存映射文件" class="headerlink" title="内存映射文件"></a>内存映射文件</h3><ol>
<li>机制思想：进程发起一个系统调用，将一个文件映射到其虚拟地址空间的一部分，在映射共享的页面时不会读入页面的内容，而是在访问页面时才读入。进程退出或解除文件映射时所有改动的页面会被写回到文件</li>
<li>如果多个进程同时映射了同一份文件，它们就可以通过共享内存通信</li>
</ol>
<h3 id="清除策略"><a href="#清除策略" class="headerlink" title="清除策略"></a>清除策略</h3><ol>
<li>分页守护进程定时检查内存状态，通过置换算法维护空闲页框</li>
</ol>
<h3 id="进程创建-1"><a href="#进程创建-1" class="headerlink" title="进程创建"></a>进程创建</h3><ol>
<li>确定程序和数据初始大小，创建页表，内存中为页表分配空间初始化</li>
<li>磁盘交换区中分配空间</li>
<li>程序正文和数据对交换区空间初始化，以便进程缺页中断时可以调入需要的页面</li>
<li>页表和磁盘交换区的信息存储在进程表中</li>
</ol>
<h3 id="进程执行"><a href="#进程执行" class="headerlink" title="进程执行"></a>进程执行</h3><ol>
<li>重置MMU，刷新TLB，新进程页表成为当前页表</li>
</ol>
<h3 id="缺页中断"><a href="#缺页中断" class="headerlink" title="缺页中断"></a>缺页中断</h3><ol>
<li>确定缺页的虚拟地址</li>
<li>确定缺失的页面，确定磁盘上的位置</li>
<li>找到合适的页框，读入页面</li>
<li>备份指令，重新执行</li>
<li>正在进行IO操作的页面不会被移出内存</li>
</ol>
<h3 id="进程退出"><a href="#进程退出" class="headerlink" title="进程退出"></a>进程退出</h3><ol>
<li>最后一个进程退出时，释放页表，页面和页面在硬盘所占用的空间</li>
</ol>
<h3 id="分段"><a href="#分段" class="headerlink" title="分段"></a>分段</h3><ol>
<li>每个段由一个从0到最大的线性地址序列构成，每个段都是独立地址空间</li>
<li>寻址：段号+段内地址</li>
<li>简化对长度经常变化的数据结构管理，有利于各个过程单独编译链接</li>
<li>使程序和数据可以划分为逻辑上独立的地址空间，有助于共享，连接和保护</li>
<li>内存段与段之间的空闲内存外部碎片可以通过内存紧缩</li>
<li>分段和分页的结合：段内进行分页，提供二维的虚拟内存</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://whales2018.github.io/2018/08/18/opsystem-1/" data-id="cjsvbgdp6000h45t95v8cgi8r" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-opsystem-3" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/08/18/opsystem-3/" class="article-date">
  <time datetime="2018-08-18T03:21:11.000Z" itemprop="datePublished">2018-08-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/《现代操作系统》阅读笔记/">《现代操作系统》阅读笔记</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/08/18/opsystem-3/">《现代操作系统》阅读笔记三</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="五、死锁"><a href="#五、死锁" class="headerlink" title="五、死锁"></a>五、死锁</h1><h3 id="资源"><a href="#资源" class="headerlink" title="资源"></a>资源</h3><ol>
<li>可抢占资源：如存储器，两个进出互相等待对方占有的资源时，其中一方可以释放可抢占性资源，另一方可以顺利执行</li>
<li>不可抢占资源：无法把资源从占有它的进程抢占过来</li>
</ol>
<h3 id="死锁"><a href="#死锁" class="headerlink" title="死锁"></a>死锁</h3><ol>
<li>如果一个进程集合中的每个进程都在等待只能由该进程集合中的其他进程才能引发的事件，该进程集合就是死锁</li>
<li>死锁条件：互斥条件，占有和等待条件，不可抢占条件，环路等待条件</li>
<li>处理死锁策略：检测恢复，仔细对资源分配动态避免，破坏死锁条件之一</li>
<li>检测：需要查阅相关检测算法</li>
<li>恢复：利用抢占恢复，回滚恢复，杀死进程</li>
</ol>
<h3 id="预防"><a href="#预防" class="headerlink" title="预防"></a>预防</h3><ol>
<li>尽量做到尽可能少的进程可以真正请求资源</li>
<li>破坏占有和等待条件：进程在开始执行前一次性请求所需全部资源，另一种，是进程请求资源时先释放已经持有，再一次性请求</li>
<li>破坏不可抢占条件：对资源进行虚拟化，由底层进行实际的调用。不适用于操作系统或数据库的记录</li>
<li>避免出现环路等待：对资源进行编号，每个进程请求需要按照资源的顺序提出</li>
<li>两阶段加锁：第一阶段将所需记录加锁，如果遇到已经被加锁记录，则释放所有记录，重新第一阶段，第二阶段修改数据然后释放</li>
<li>通信死锁：超时</li>
<li>活锁：进程在临界区进行轮询，则可能出现没有进程阻塞，但进程一直尝试失败，常见于资源不足</li>
<li>饥饿：资源分配迟迟没有轮到该进程</li>
</ol>
<h1 id="六、多媒体操作系统"><a href="#六、多媒体操作系统" class="headerlink" title="六、多媒体操作系统"></a>六、多媒体操作系统</h1><h2 id="多媒体"><a href="#多媒体" class="headerlink" title="多媒体"></a>多媒体</h2><ol>
<li>特征：使用极高的数据率，多媒体要求实时回放</li>
<li>要求：存储量大需要进行压缩，实时数据传输</li>
<li>视频压缩：编码算法和解码算法的速度根据场景不同考量，不必100%可逆，允许有损</li>
<li>音频压缩：波形编码傅里叶变换，感知编码</li>
</ol>
<h1 id="七、多处理机系统"><a href="#七、多处理机系统" class="headerlink" title="七、多处理机系统"></a>七、多处理机系统</h1><h2 id="多处理机操作系统"><a href="#多处理机操作系统" class="headerlink" title="多处理机操作系统"></a>多处理机操作系统</h2><ol>
<li>每个CPU有自己的操作系统：无法充分利用资源，任务分配均衡等</li>
<li>主从多处理机：主处理机容易成为瓶颈过载</li>
<li>对称多处理机：把操作系统分割成多个临界区，每个临界区由其互斥信号量保护</li>
</ol>
<h2 id="多处理机同步，调度"><a href="#多处理机同步，调度" class="headerlink" title="多处理机同步，调度"></a>多处理机同步，调度</h2><ol>
<li>分时</li>
<li>空间共享：多个CPU上同时调度多个线程</li>
<li>群调度：一组相关线程作为一个单位调度，一个群的成员在不同的CPU上同时进行，群中所有成员共同开始和结束时间片</li>
</ol>
<h1 id="八、安全"><a href="#八、安全" class="headerlink" title="八、安全"></a>八、安全</h1><h2 id="目标与威胁"><a href="#目标与威胁" class="headerlink" title="目标与威胁"></a>目标与威胁</h2><ol>
<li>数据机密性–数据暴露</li>
<li>数据完整性–数据篡改，数据遗失</li>
<li>系统可用性–拒绝服务</li>
<li>排外性–病毒控制</li>
</ol>
<h2 id="密码学原理"><a href="#密码学原理" class="headerlink" title="密码学原理"></a>密码学原理</h2><ol>
<li>密钥：算法的加密参数</li>
<li>加密算法公开，加密安全性由独立于算法的密钥决定</li>
<li>公钥加密：加密运算比较简单，没有密钥的解密运算十分繁琐。公钥是加密密钥，私钥用于解密</li>
<li>单向函数：f(x)可容易计算出y值，给定y值不能计算x，也称作加密散列函数</li>
<li>数字签名：对文档运行单向散列函数如MD5，文档拥有者用私钥计算得到D(散列值)，接收方用发送方公钥计算得到E(D(散列值))得到实际散列值，再比较</li>
</ol>
<h2 id="保护机制"><a href="#保护机制" class="headerlink" title="保护机制"></a>保护机制</h2><ol>
<li>域：一对组合，指定一个对象和一些可在其上运行的操作子集</li>
<li>基本原则：最低权限原则，每个域拥有最少对象和满足其完成工作的最少权限，安全性最好</li>
<li>unix：进程的域由(UID,GID)定义，每个进程分为用户部分和核心部分，执行系统调用时，从用户态切换到内核态，核心部分可以访问与用户部分不同的对象集，这样系统调用引发域切换</li>
<li>访问控制表与权能字</li>
<li>隐写术：如将实际信息隐藏在图片中等</li>
</ol>
<h2 id="用户认证"><a href="#用户认证" class="headerlink" title="用户认证"></a>用户认证</h2><ol>
<li>口令</li>
<li>一次性口令，如网上银行银盾等</li>
<li>挑战响应认证，密码问题等</li>
<li>实物认证</li>
<li>生物识别认证</li>
</ol>
<h2 id="内部安全"><a href="#内部安全" class="headerlink" title="内部安全"></a>内部安全</h2><ol>
<li>逻辑炸弹</li>
<li>后门陷阱</li>
<li>登录欺骗</li>
</ol>
<h2 id="代码漏洞"><a href="#代码漏洞" class="headerlink" title="代码漏洞"></a>代码漏洞</h2><ol>
<li>缓冲区溢出</li>
<li>代码注入：系统调用时，如命令行</li>
<li>权限提升攻击：利用计划任务进行攻击等</li>
</ol>
<h2 id="恶意软件"><a href="#恶意软件" class="headerlink" title="恶意软件"></a>恶意软件</h2><ol>
<li>木马攻击</li>
<li>病毒</li>
<li>蠕虫</li>
</ol>
<h2 id="防御"><a href="#防御" class="headerlink" title="防御"></a>防御</h2><ol>
<li>防火墙</li>
<li>反病毒扫描，完整性检查，行为检查捕捉系统调用</li>
<li>代码签名</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://whales2018.github.io/2018/08/18/opsystem-3/" data-id="cjsvbgdpa000k45t9nvg8qa8a" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-opsystem-2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/08/18/opsystem-2/" class="article-date">
  <time datetime="2018-08-18T03:21:11.000Z" itemprop="datePublished">2018-08-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/《现代操作系统》阅读笔记/">《现代操作系统》阅读笔记</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/08/18/opsystem-2/">《现代操作系统》阅读笔记二</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="三、文件系统"><a href="#三、文件系统" class="headerlink" title="三、文件系统"></a>三、文件系统</h1><h2 id="文件"><a href="#文件" class="headerlink" title="文件"></a>文件</h2><ol>
<li>文件命名，文件结构，文件类型</li>
<li>文件存取：顺序存取，随机存取</li>
<li>文件属性：如权限，创建修改时间等</li>
<li>文件操作：常用系统调用如创建，打开等；open：文件属性和磁盘地址装入内存</li>
</ol>
<h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ol>
<li>层次目录系统，路径名</li>
<li>目录操作：常用系统调用如创建，打开等；硬连接：文件的节点技术器增加，修改同一份文件。软连接只是符号连接，快捷方式，可以跨越磁盘界限</li>
</ol>
<h2 id="文件系统的实现"><a href="#文件系统的实现" class="headerlink" title="文件系统的实现"></a>文件系统的实现</h2><ol>
<li>主引导记录MBR：磁盘的0号扇区，引导计算机</li>
<li>分区表：MBR后面，记录每个分区的起始结束地址</li>
<li>分区结构：引导块，超级块，空闲管理，i节点，根目录，文件和目录</li>
<li>过程：计算机被引导，BIOS读入并执行MBR，确定活动分区，读入并执行第一个块引导快boot block，引导块中的程序将装载该分区中的操作系统</li>
<li>每个分区都从一个启动块开始</li>
<li>超级块：启动块之后，包括文件系统类型用的魔数，文件系统中数据块的数量等</li>
<li>空闲管理：超级块之后，位图或链表形式</li>
</ol>
<h2 id="文件的实现"><a href="#文件的实现" class="headerlink" title="文件的实现"></a>文件的实现</h2><ol>
<li>连续分配：删除时会产生磁盘空洞，写入时需要先挑选合适大小的磁盘空洞，常见于CD-ROM</li>
<li>链表分配：不利于随机存取，指针占了一些字节，致使存储数据不再是2的整数幂</li>
<li>文件分配表FAT：把磁盘块的指针放在内存的一个表中，目录项中记录起始块号即可。缺点是需要将整个表放在内存中，不适用于大磁盘</li>
<li>i节点：每个文件一个i节点数据结构，列出文件属性和文件块的磁盘地址，具有指针可以指向包含磁盘块地址的块的地址</li>
</ol>
<h2 id="日志文件系统"><a href="#日志文件系统" class="headerlink" title="日志文件系统"></a>日志文件系统</h2><ol>
<li>如NTFS和Linux ext3</li>
<li>基本思想：保存一个用于记录系统下一步将要做什么的日志，当系统崩溃重启时可以查看日志，完成未完成任务</li>
<li>先写日志项列出要完成的动作，写入磁盘，完成动作后擦除日志项</li>
</ol>
<h2 id="虚拟文件系统"><a href="#虚拟文件系统" class="headerlink" title="虚拟文件系统"></a>虚拟文件系统</h2><ol>
<li>和文件相关的系统调用POSIX接口指向虚拟文件系统，由虚拟文件系统调用底层实际的文件系统</li>
</ol>
<h2 id="文件系统管理和优化"><a href="#文件系统管理和优化" class="headerlink" title="文件系统管理和优化"></a>文件系统管理和优化</h2><ol>
<li>选定块大小：性能和空间利用率不可兼得</li>
<li>记录空闲块：位图，空闲列表</li>
<li>磁盘配额：通过打开文件表中的配额指针，找到配额表中用户的配额表项。</li>
<li>文件系统的一致性：块检查检查使用表和空闲表并进行校正，目录检查检查文件使用表和文件i节点的计数。rm操作只修改i节点，没有把磁盘块返回空闲表</li>
</ol>
<h2 id="文件系统性能"><a href="#文件系统性能" class="headerlink" title="文件系统性能"></a>文件系统性能</h2><p>如果只需要读一个字，内存比磁盘方位快百万数量级</p>
<h3 id="高速缓存"><a href="#高速缓存" class="headerlink" title="高速缓存"></a>高速缓存</h3><ol>
<li>逻辑上属于磁盘，实际保存在内存中。与分页类似，置换算法类似</li>
<li>系统调用SYNC强制性把全部修改过的块写回磁盘，若没有SYNC就移动磁盘，则数据丢失</li>
</ol>
<h3 id="块提前读"><a href="#块提前读" class="headerlink" title="块提前读"></a>块提前读</h3><ol>
<li>在需要用到块时，试图提前将其写入高速缓存，提高命中率，如完成k块操作时，预读k+1块到高速缓存</li>
<li>不适用于随机存取文件</li>
</ol>
<h3 id="减少磁盘臂运动"><a href="#减少磁盘臂运动" class="headerlink" title="减少磁盘臂运动"></a>减少磁盘臂运动</h3><ol>
<li>把有可能顺序存取的块放在一起，最好是同一个柱面，减少磁盘臂运动</li>
<li>使用i节点的文件系统中，需要两次磁盘访问，访问i节点和访问块。所以将i节点存放在磁盘中部，可以减少寻道时间</li>
</ol>
<h3 id="磁盘碎片整理"><a href="#磁盘碎片整理" class="headerlink" title="磁盘碎片整理"></a>磁盘碎片整理</h3><ol>
<li>通过移动或复制，使空闲空间连成一片</li>
</ol>
<h1 id="四、输入-输出"><a href="#四、输入-输出" class="headerlink" title="四、输入/输出"></a>四、输入/输出</h1><h2 id="IO硬件原理"><a href="#IO硬件原理" class="headerlink" title="IO硬件原理"></a>IO硬件原理</h2><h3 id="IO设备"><a href="#IO设备" class="headerlink" title="IO设备"></a>IO设备</h3><ol>
<li>块设备：硬盘，CD-ROM，USB</li>
<li>字符设备：不可寻址没有寻道操作，打印机，网路接口，鼠标等</li>
<li>时钟，内存映射显示器等</li>
</ol>
<h3 id="设备控制器"><a href="#设备控制器" class="headerlink" title="设备控制器"></a>设备控制器</h3><ol>
<li>有寄存器用来与CPU通信</li>
<li>数据缓冲区</li>
<li>内存映射IO：每个控制寄存器映射到内存空间中被分配唯一的内存地址</li>
<li>避免对设备控制器进行高速缓存，操作系统必须管理选择性高速缓存</li>
<li>DMA：直接存储器存取，调控多个设备的数据传送</li>
<li>中断：设备中断发出信号，由中断控制器检测</li>
</ol>
<h3 id="IO软件原理"><a href="#IO软件原理" class="headerlink" title="IO软件原理"></a>IO软件原理</h3><ol>
<li>设备独立性</li>
<li>统一命名</li>
<li>错误处理</li>
<li>同步阻塞，异步中断驱动：大部分物理IO是异步的，CPU启动传输便去做别的</li>
<li>缓冲</li>
<li>共享设备和独占设备</li>
<li>程序控制IO：轮询设备寄存器是否就绪，直到全部IO完成，一直占用CPU</li>
<li>中断驱动IO：中断发生在每个字符上</li>
<li>DMA控制IO：将中断的次数从每个字符减少的每个缓冲区</li>
<li>设备驱动程序：为了访问设备的硬件，通常必须是操作系统内核的一部分</li>
</ol>
<h2 id="盘"><a href="#盘" class="headerlink" title="盘"></a>盘</h2><p>磁盘组织成柱面，每个柱面包含若干磁道，磁道数与垂直堆叠的磁头个数相同，磁道分成若干扇区</p>
<ol>
<li>SATA：磁盘驱动器包含微控制器，负责高速缓存，重叠寻道，坏块重映等</li>
<li>RAID：将一个装满磁盘的盒子安装到计算机，用RAID控制器替换磁盘控制器</li>
</ol>
<h3 id="磁盘臂调度算法"><a href="#磁盘臂调度算法" class="headerlink" title="磁盘臂调度算法"></a>磁盘臂调度算法</h3><ol>
<li>磁盘读写时间因素：寻道占主导，旋转延迟，实际数据传输</li>
<li>磁盘驱动程序维护一张表，按柱面号索引，每个柱面未完成的请求组成一个链表</li>
<li>SSF：最短寻道优先算法，获得最小响应时间与公平性有冲突</li>
<li>电梯算法：上下移动完成未完成的请求</li>
<li>磁盘控制器高速缓存：每次将邻近的扇区也读取</li>
</ol>
<h2 id="时钟"><a href="#时钟" class="headerlink" title="时钟"></a>时钟</h2><ol>
<li>时钟负责维护时间，根据已知的时间间隔产生中断。防止进程垄断CPU等</li>
<li>大多数计算机具有一个由电池供电的备份时钟</li>
</ol>
<h3 id="时钟软件"><a href="#时钟软件" class="headerlink" title="时钟软件"></a>时钟软件</h3><ol>
<li>维护日时间，防止进程超时，记录CPU使用，处理alarm系统调用，监视定时器，统计信息收集</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://whales2018.github.io/2018/08/18/opsystem-2/" data-id="cjsvbgdpb000m45t9ra59b388" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-nginx-1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/26/nginx-1/" class="article-date">
  <time datetime="2018-07-26T03:21:11.000Z" itemprop="datePublished">2018-07-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Nginx文档笔记/">Nginx文档笔记</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/26/nginx-1/">Nginx文档笔记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="一、安装"><a href="#一、安装" class="headerlink" title="一、安装"></a>一、安装</h1><ol>
<li><a href="https://docs.nginx.com/nginx/admin-guide/installing-nginx/installing-nginx-open-source/" target="_blank" rel="noopener">安装文档</a></li>
<li>Ubuntu:除了文档列出的依赖，额外依赖<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install libssl-dev</span><br><span class="line">sudo apt install  libxml2-dev</span><br><span class="line">sudo apt install libxslt1-dev</span><br><span class="line">sudo apt install libgd-dev</span><br><span class="line">sudo apt install libgeoip-dev</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="二、nginx管理"><a href="#二、nginx管理" class="headerlink" title="二、nginx管理"></a>二、nginx管理</h1><ol>
<li>一个master进程和多个worker进程，如果缓存开启，则缓存加载和缓存管理两个进程也在初始化运行</li>
<li>nginx通过信号管理，除了nginx -s quit/reload/reopen/stop 也可以通过kill 命令发送信号给master进程</li>
</ol>
<h1 id="三、Web服务器"><a href="#三、Web服务器" class="headerlink" title="三、Web服务器"></a>三、Web服务器</h1><h2 id="静态资源"><a href="#静态资源" class="headerlink" title="静态资源"></a>静态资源</h2><ol>
<li>root 指定资源根目录</li>
<li>location 匹配url， =普通字符串匹配，～表示正则匹配</li>
<li>sendfile，sendfile_max_chunk：允许数据从一个文件描述符直接拷贝到另外一个，指定分片大小避免较快的连接长期占用worker进程</li>
<li>tcp_nodelay：禁用nagle算法，避免延迟响应，配合keepalive</li>
<li>backlog：支持更多连接，需要配合内核配置优化</li>
</ol>
<h2 id="反向代理"><a href="#反向代理" class="headerlink" title="反向代理"></a>反向代理</h2><ol>
<li>proxy_pass: 请求发送到指定服务组</li>
<li>proxy_bind：如果代理服务器有多个网卡，则与上游服务连接时可以指定ip地址</li>
<li>proxy_set_header，proxy_buffer_size，proxy_timeout，proxy_connect_timeout等</li>
<li>SSL: 基本原理与配置与https一致</li>
</ol>
<h2 id="压缩"><a href="#压缩" class="headerlink" title="压缩"></a>压缩</h2><ol>
<li>gzip</li>
<li>gzip_types</li>
<li>gzip_min_length：低于这个阈值不会进行压缩</li>
<li>gzip_proxied：如果请求来自代理服务器，则不会进行压缩，所以通过检查请求的cache-control，符合条件的才进行压缩</li>
<li>gzip_static：允许直接发送压缩文件<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    gzip on;</span><br><span class="line">    gzip_types      text/plain application/xml;</span><br><span class="line">    gzip_proxied    no-cache no-store private expired auth;</span><br><span class="line">    gzip_min_length 1000;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="四、负载均衡"><a href="#四、负载均衡" class="headerlink" title="四、负载均衡"></a>四、负载均衡</h1><h2 id="HTTP负载均衡"><a href="#HTTP负载均衡" class="headerlink" title="HTTP负载均衡"></a>HTTP负载均衡</h2><h3 id="代理"><a href="#代理" class="headerlink" title="代理"></a>代理</h3><ol>
<li>设置一组上游服务 upstream， 默认使用round robin 算法</li>
<li>通过proxy_pass 指定上游服务组</li>
</ol>
<h3 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h3><ol>
<li>round robin：通过server_weight 参数轮询</li>
<li>least_conn：发送给最少连接的上游服务，server_weight 参数作为参考</li>
<li>ip_hash：通过ip地址计算哈希值，如果需要移除一台服务，则可以设置为down，则请求将依规则发给下一台</li>
<li>hash：用户定义的哈希值进行路由</li>
<li>random：随机取出指定数量的服务，从中再根据least_conn算法路由</li>
</ol>
<h3 id="慢启动"><a href="#慢启动" class="headerlink" title="慢启动"></a>慢启动</h3><ol>
<li>设置slow_start 避免服务刚恢复时，承载过多请求</li>
</ol>
<h3 id="服务失败检测"><a href="#服务失败检测" class="headerlink" title="服务失败检测"></a>服务失败检测</h3><ol>
<li>max_fails：失败达到参数设置，则nginx认为服务不可用，默认1次</li>
<li>fail_timeout：认为不可用的持续时间，即不再重试的时间，默认10s</li>
</ol>
<h3 id="数据共享"><a href="#数据共享" class="headerlink" title="数据共享"></a>数据共享</h3><ol>
<li>设置zone可以使nginx多个worker进程共享相同的upstream 服务组设置及相关计数</li>
</ol>
<h3 id="使用DNS"><a href="#使用DNS" class="headerlink" title="使用DNS"></a>使用DNS</h3><ol>
<li>设置resolver，valid为ttl时间，ipv6可以设置关闭</li>
<li>upstream 下各服务为域名</li>
</ol>
<h2 id="TCP、UDP负载均衡"><a href="#TCP、UDP负载均衡" class="headerlink" title="TCP、UDP负载均衡"></a>TCP、UDP负载均衡</h2><ol>
<li>与http负载均衡类似</li>
</ol>
<h2 id="反向代理时传递客户端的真实IP而非负载均衡器的IP地址"><a href="#反向代理时传递客户端的真实IP而非负载均衡器的IP地址" class="headerlink" title="反向代理时传递客户端的真实IP而非负载均衡器的IP地址"></a>反向代理时传递客户端的真实IP而非负载均衡器的IP地址</h2><ol>
<li><p>配置nginx接受代理协议，则nginx将真实客户端ip和端口存储在变量$proxy_protocol_addr，$proxy_protocol_port</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">http &#123;</span><br><span class="line">    #...</span><br><span class="line">    server &#123;</span><br><span class="line">        listen 80   proxy_protocol;</span><br><span class="line">        listen 443  ssl proxy_protocol;</span><br><span class="line">        #...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">stream &#123;</span><br><span class="line">    #...</span><br><span class="line">    server &#123;</span><br><span class="line">        listen 12345 proxy_protocol;</span><br><span class="line">        #...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>http修改当前server ip为当前实际客户端的ip</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">http &#123;</span><br><span class="line">    server &#123;</span><br><span class="line">        #...</span><br><span class="line">        real_ip_header proxy_protocol;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>将ip地址传递给上游服务 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">http &#123;</span><br><span class="line">    proxy_set_header X-Real-IP       $proxy_protocol_addr;</span><br><span class="line">    proxy_set_header X-Forwarded-For $proxy_protocol_addr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>将$proxy_protocol_addr添加到log_format中</p>
</li>
</ol>
<h1 id="五、安全"><a href="#五、安全" class="headerlink" title="五、安全"></a>五、安全</h1><h2 id="SSL"><a href="#SSL" class="headerlink" title="SSL"></a>SSL</h2><p>安全地协商出一份对称加密秘钥<br>RSA算法流程</p>
<ol>
<li>客户端发送client hello，客户端随机数，带上可选加密参数信息</li>
<li>服务端响应server hello，服务端随机数，已选加密参数信息</li>
<li>服务端响应certificate，发送服务器证书，server hello done</li>
<li>客户端发送证书公钥加密后的预主秘钥，客户端进一步用预主秘钥生成主秘钥，发送第一个用主密钥加密的数据</li>
<li>服务端用证书私钥解密预主秘钥，生成主密钥，握手完成</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">http &#123;</span><br><span class="line">    ssl_session_cache   shared:SSL:10m;</span><br><span class="line">    ssl_session_timeout 10m;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen              443 ssl;</span><br><span class="line">        server_name         www.example.com;</span><br><span class="line">        keepalive_timeout   70;</span><br><span class="line"></span><br><span class="line">        ssl_certificate     www.example.com.crt;</span><br><span class="line">        ssl_certificate_key www.example.com.key;</span><br><span class="line">        ssl_protocols       TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line">        ssl_ciphers         HIGH:!aNULL:!MD5;</span><br><span class="line">        #...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="https优化"><a href="#https优化" class="headerlink" title="https优化"></a>https优化</h2><ol>
<li>使用keepalive</li>
<li>复用SSL会话参数，避免重复SSL握手</li>
</ol>
<h2 id="同一个IP支持多个https-server"><a href="#同一个IP支持多个https-server" class="headerlink" title="同一个IP支持多个https server"></a>同一个IP支持多个https server</h2><ol>
<li>因为SSL先于浏览器发送http请求，所以，服务端只提供默认证书，致使请求都指向默认server</li>
<li>最好的解决方法是，分ip部署https server</li>
<li>另外可以通过使用多个域名公共证书，同时需要TLS SNI support enabled</li>
</ol>
<h2 id="HTTP基础认证"><a href="#HTTP基础认证" class="headerlink" title="HTTP基础认证"></a>HTTP基础认证</h2><ol>
<li>auth_basic：对话框的用户区</li>
<li>auth_basic_user_file：用户密码表的文件路径</li>
<li>satisfy allow deny 设置ip限制</li>
<li>auth_request 可以指定认证location</li>
</ol>
<h2 id="限流"><a href="#限流" class="headerlink" title="限流"></a>限流</h2><ol>
<li>limit_conn_zone limit_conn: 限制连接数，限制每个客户端的连接数也可以设置服务接收的连接数</li>
<li>limit_req_zone limit_req: 限制某个location下，请求的频率；burst，如果请求超出限制区，则burst为队列长度，其他请求立即返回503</li>
<li>limit_rate: 限制location下的带宽</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://whales2018.github.io/2018/07/26/nginx-1/" data-id="cjsvbgdp5000f45t9dnluz1ek" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Nginx文档笔记/">Nginx文档笔记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python源码学习/">Python源码学习</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Redis文档阅读笔记/">Redis文档阅读笔记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/《HTTP权威指南》阅读笔记/">《HTTP权威指南》阅读笔记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/《TCP-IP详解卷1》阅读笔记/">《TCP/IP详解卷1》阅读笔记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/《现代操作系统》阅读笔记/">《现代操作系统》阅读笔记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/《高性能MySQL》阅读笔记/">《高性能MySQL》阅读笔记</a></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/09/18/tcpip-1/">《TCP/IP详解卷1》阅读笔记一</a>
          </li>
        
          <li>
            <a href="/2018/08/18/opsystem-1/">《现代操作系统》阅读笔记一</a>
          </li>
        
          <li>
            <a href="/2018/08/18/opsystem-3/">《现代操作系统》阅读笔记三</a>
          </li>
        
          <li>
            <a href="/2018/08/18/opsystem-2/">《现代操作系统》阅读笔记二</a>
          </li>
        
          <li>
            <a href="/2018/07/26/nginx-1/">Nginx文档笔记</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 Whales<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>